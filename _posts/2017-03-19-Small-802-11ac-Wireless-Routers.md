---
title: Small 802.11ac Wireless Routers
tags: wifi ubiquiti lede openwrt amplifi open-mesh japan
---

I’ll be moving to Japan in a few weeks, leaving my current role of Network Technician with Amazon Web Services in Singapore to the same role in Tokyo, Japan. An international move sounds like a hectic experience for most, but since I don’t have a spouse or kids, and also because Amazon provides relocation assistance, I only really have to think about accommodation. Being who I am, though, I put that aside for now, and instead took the opportunity to look for a new wireless router for my new home in Japan! (I may have put the cart before the horse…)

In Singapore, my multi-storey home is blanketed in high-speed 802.11ac Wi-Fi using Ubiquiti’s UniFi access points; I have no doubt that UniFi was *the* best way to roll out my home Wi-Fi, and [this Ars Technica review](https://arstechnica.com/gadgets/2015/10/review-ubiquiti-unifi-made-me-realize-how-terrible-consumer-wi-fi-gear-is/) is a good primer to the UniFi system. In Tokyo, though, I’m specifically on the lookout for a “1LDK”[^1]-type home, of approximately 20-40m<sup>2</sup>, which definitely calls for something much less elaborate.

Now, an ordinary person would probably head to [the Wireless Router department on Amazon.co.jp](https://www.amazon.co.jp/b/?node=2151996051) and pick something top-rated, but I am not an ordinary person, and wanted to find a wireless router with some specific requirements:

* Small (against the current trend of increasingly [aggressive](http://www.dlink.com/products/dir-890l-ac3200-ultra-wifi-router), [gamer-type](https://www.asus.com/Networking/RT-AC5300/), [designs](http://www.asrock.com/networking/g10/))
* Unassuming design (I don’t want a spaceship graveyard in the living room)
* White color
* Gigabit ports (1 WAN and ≥1 LAN)
* At least dual-chain 802.11ac
* At least 500Mbps NAT throughput
* Runs [OpenWrt](https://openwrt.org)/[LEDE](https://lede-project.org) under the hood
* Uses wireless chips with mainline Linux wireless drivers

The first few requirements are mostly a personal aesthetic preference, though they are also because, having an engineering background, I believe that miniaturization of an electronic product is an expression of engineering talent; anyone can make a powerful wireless router by making a honking, large router (to work around having to engineer good heat dissipation into the product) and making it [stand upright with obnoxiously huge antennae](https://www.asus.com/Networking/RTAC68U/)[^2] (to work around having to engineer good internal antennae and consequently antennae placement within the product).

As for the latter requirements concerning Linux, it’s important to note that I’m not a [Richard Stallman](https://stallman.org)-type software freedom activist, and I do not have a distrust of vendor-provided code and binaries. However, as someone who has paid to own a piece of hardware, I expect all my routers to run a bootloader which is able to boot a user-supplied Linux kernel and distribution (i.e. OpenWrt or LEDE). This is mostly in the interest of having the latest and greatest code and firmware long after the manufacturer stops supporting the router. By the way, most routers manufactured in recent times ship with some form of Linux on it, with many wireless SoC vendors using forks of OpenWrt as an official vendor SDK, e.g. [Qualcomm’s QSDK](https://wiki.codeaurora.org/xwiki/bin/QSDK/) and [MediaTek’s SDKs](https://github.com/MediaTek-Labs/linkit-smart-7688-feed) - so it’s pretty easy to find routers which do (or can) run OpenWrt or LEDE firmware.

So which routers did I end up taking a look at? The first router was the [Ubiquiti AmpliFi](https://amplifi.com) AFI-R AmpliFi High Density Home WiFi Router, which is absolutely stunning and was incredibly straightforward to set up (which, by the way, can only be done through the iOS or Android app). It was so simple to set up, that I can honestly say that the AmpliFi is everything that Apple’s now-discontinued AirPort wireless routers should have been; Apple’s AirPort utility was the gold standard for ease of use in wireless router out-of-the-box setup, but here, Ubiquiti has taken everything that Apple got right with AirPort and completely revolutionized it for the current generation of wireless routers and mesh APs. I don’t have much to say about AmpliFi because the hardware, software, usability and performance of the product is completely frictionless; it is set-and-forget (and also very pretty). I was also [happy to see that](https://gist.github.com/ndoo/e4377df6f71f8a6b3df8986fc0166886) the AmpliFi AFI-R firmware is forked from a recent OpenWrt build and the open-source ath10k driver (possible with custom firmware to improve mesh performance).

If I had one gripe about the AmpliFi AFI-R, it’s that it is a little bigger than it strictly needs to be as a 4″ cube; looking at the [internals](https://fccid.io/document.php?id=3028170), I suspect it could be shrunken a little into a 3″ cube, to make it a little less imposing, though I do get that Ubiquiti may have intentionally sized it as such for vanity reasons or to make assembly easier by leaving some wiggle room around the lovely internal antenna.

That brings me to the next router, the [Open-Mesh OM5P-AC](http://www.open-mesh.com/grp-om5p-ac-cloud-access-point.html), which is neither technically a router nor able to support OpenWrt or LEDE due to a [locked bootloader](http://blog.true.cz/2017/02/free-your-router-again/); the good news, though, is that the firmware signing code has been [released](https://github.com/true-systems/openmesh-gpl-elx-uboot-sdk) (yay GPL) which led to the good folks at [True Systems](http://www.true.cz) releasing a bootloader unlocker. The unlock process was pretty straightforward, I spun up `tftpd-hpa` on my ThinkPad X200 running Debian, set its IP address to `192.168.100.8/24`, connected it to the OM5P-AC on its Ethernet port nearest the DC jack and powered the OM5P-AC up. In less than a minute, the green LED blinked slowly to indicate the unlock succeeded and I was able to flash LEDE with the [ap51-flash utility](https://dev.cloudtrax.com/git/ap51-flash.git).

Everything worked beautifully out of the box in LEDE, with the Ethernet port next to the DC barrel jack as a WAN port with dual-stack DHCP client, and the other Ethernet port serving as LAN. As someone who hadn’t used OpenWrt or LEDE for a while (on account of using UniFi at home), I was also very pleasantly surprised to have regulatory domains, DFS channels (and associated 802.11h and 11d features) working out of the box. Wireless configuration with ath10k was also flawless with transmit power and channel configurations working across the board and also reporting correctly in realtime, along with live data rate, signal and 802.11 capabilities statistics for connected clients.

What I really liked about the OM5P-AC is that it is the smallest 802.11ac Gigabit wireless router I have ever seen (second only to the [Elecom WRH-733G](http://www2.elecom.co.jp/products/WRH-733GBK.html) which I disqualify because of Realtek’s poor Linux sources and non-existent support in mainline Linux), though if I had to change one thing about it, it would be the extremely bright blue LEDs used to indicate power and wired Ethernet activity (I already have some orange 0603 LEDs on order).

After reading all that, you’re probably wondering which wireless router I’ll end up using. I’ll probably be using the Open-Mesh OM5P-AC and not the AmpliFi AFI-R, and only because the AFI-R does not have a web administration page. I like having my ubiquitous (heh) `192.168.1.1` web interface because I’m a technically-inclined person and I want my port forward GUIs to look representative of their iptables equivalents. I want to be able to configure interfaces, bridges and VLANs; I want to be able to disable 2.4GHz wireless (something that can’t be done on AmpliFi). While the modern user may be more comfortable with an easy setup from their choice of iOS or Android app, you can pry `192.168.1.1` from my cold dead hands.

[^1]: “1LDK” expands to mean “1 room, in addition to a combined Living, Dining and Kitchen room)“
[^2]: The [RT-AC68U](https://www.asus.com/Networking/RTAC68U/) is a router which cannot be placed horizontally, which means it does not fit in some shelves/TV consoles
[*SoC]: System-on-Chip
